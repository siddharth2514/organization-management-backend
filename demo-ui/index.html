<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Organization Management â€“ Demo UI</title>

  <style>
    :root {
      --bg: #0b0b14;
      --card: #141427;
      --text: #e6e6f0;
      --muted: #a0a0c0;
      --accent: #c77dff;      /* lavender */
      --accent-2: #ff5fd2;    /* neon pink */
      --border: #2b2b4f;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      min-height: 100vh;
      font-family: "Inter", system-ui, sans-serif;
      background: radial-gradient(circle at top, #16162e, #08080f);
      color: var(--text);
      display: flex;
      justify-content: center;
      align-items: flex-start;
      padding: 50px 20px;
    }

    .container {
      width: 100%;
      max-width: 900px;
    }

    h1 {
      text-align: center;
      margin-bottom: 6px;
      font-size: 2rem;
      letter-spacing: 0.5px;
    }

    .subtitle {
      text-align: center;
      color: var(--muted);
      margin-bottom: 40px;
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 20px;
    }

    .card {
      background: linear-gradient(180deg, var(--card), #0f0f1f);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 20px;
      box-shadow: 0 0 0 transparent;
      transition: box-shadow 0.2s ease;
    }

    .card:hover {
      box-shadow: 0 0 25px rgba(199, 125, 255, 0.15);
    }

    .card h3 {
      margin-top: 0;
      margin-bottom: 12px;
      font-size: 1.1rem;
      color: var(--accent);
    }

    input {
      width: 100%;
      padding: 10px 12px;
      margin-bottom: 10px;
      background: #0c0c18;
      color: var(--text);
      border-radius: 8px;
      border: 1px solid var(--accent);
      outline: none;
      transition: border 0.2s ease, box-shadow 0.2s ease;
    }

    input:focus {
      border-color: var(--accent-2);
      box-shadow: 0 0 10px rgba(255, 95, 210, 0.35);
    }

    button {
      width: 100%;
      padding: 10px;
      background: linear-gradient(90deg, var(--accent), var(--accent-2));
      border: none;
      border-radius: 8px;
      color: #fff;
      font-weight: 600;
      cursor: pointer;
      margin-top: 6px;
      transition: transform 0.15s ease, box-shadow 0.15s ease;
    }

    button:hover {
      transform: translateY(-1px);
      box-shadow: 0 8px 25px rgba(199, 125, 255, 0.35);
    }

    .response {
      margin-top: 30px;
    }

    .response h3 {
      margin-bottom: 10px;
      color: var(--accent);
    }

    pre {
      background: #05050b;
      border: 1px solid var(--border);
      border-radius: 10px;
      padding: 16px;
      font-size: 13px;
      color: #00ffcc;
      overflow-x: auto;
      min-height: 120px;
    }
  </style>
</head>

<body>

<div class="container">
  <h1>Organization Management</h1>
  <div class="subtitle">
    Dark-theme demo UI to validate backend APIs
  </div>

  <div class="grid">
    <!-- CREATE -->
    <div class="card">
      <h3>Create Organization</h3>
      <input id="c_org" placeholder="Organization name" />
      <input id="c_email" placeholder="Admin email" />
      <input id="c_pass" placeholder="Admin password" />
      <button onclick="createOrg()">Create</button>
    </div>

    <!-- LOGIN -->
    <div class="card">
      <h3>Admin Login</h3>
      <input id="l_email" placeholder="Admin email" />
      <input id="l_pass" placeholder="Admin password" />
      <button onclick="login()">Login</button>
    </div>

    <!-- UPDATE -->
    <div class="card">
      <h3>Update Organization</h3>
      <input id="u_current" placeholder="Current org name" />
      <input id="u_new" placeholder="New org name" />
      <input id="u_email" placeholder="New admin email" />
      <input id="u_pass" placeholder="New admin password" />
      <button onclick="updateOrg()">Update</button>
    </div>

    <!-- DELETE -->
    <div class="card">
      <h3>Delete Organization</h3>
      <input id="d_org" placeholder="Organization name" />
      <button onclick="deleteOrg()">Delete</button>
    </div>
  </div>

  <div class="response">
    <h3>API Response</h3>
    <pre id="output">Waiting for request...</pre>
  </div>
</div>

<script>
const BASE_URL = "https://organization-management-backend-yw4n.onrender.com";
let token = "";

function show(data) {
  document.getElementById("output").textContent =
    JSON.stringify(data, null, 2);
}

async function createOrg() {
  const res = await fetch(`${BASE_URL}/org/create`, {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({
      organization_name: c_org.value,
      email: c_email.value,
      password: c_pass.value
    })
  });
  show(await res.json());
}

async function login() {
  const formData = new URLSearchParams();
  formData.append("username", l_email.value);
  formData.append("password", l_pass.value);

  const res = await fetch(`${BASE_URL}/admin/login`, {
    method: "POST",
    headers: { "Content-Type": "application/x-www-form-urlencoded" },
    body: formData.toString()
  });

  const data = await res.json();
  token = data.access_token || "";
  show(data);
}

async function updateOrg() {
  const res = await fetch(`${BASE_URL}/org/update`, {
    method: "PUT",
    headers: {
      "Content-Type": "application/json",
      "Authorization": "Bearer " + token
    },
    body: JSON.stringify({
      current_name: u_current.value,
      new_name: u_new.value,
      email: u_email.value,
      password: u_pass.value
    })
  });
  show(await res.json());
}

async function deleteOrg() {
  const res = await fetch(`${BASE_URL}/org/delete`, {
    method: "DELETE",
    headers: {
      "Content-Type": "application/json",
      "Authorization": "Bearer " + token
    },
    body: JSON.stringify({
      organization_name: d_org.value
    })
  });
  show(await res.json());
}
</script>

</body>
</html>
